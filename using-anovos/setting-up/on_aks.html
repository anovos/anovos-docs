
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Stable Features yield Resilient Models. Documentation for the Feature Engineering Library Anovos.">
      
      
        <meta name="author" content="Anovos Developers, Mobilewalla">
      
      
        <link rel="canonical" href="https://docs.anovos.ai/using-anovos/setting-up/on_aks.html">
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>On Azure Kubernetes - Anovos Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-52258647-20","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
<!-- Extra styles for API docs, cf. https://github.com/pdoc3/pdoc/blob/master/pdoc/templates/html.mako -->
<link rel="preload stylesheet" as="style"
      href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css"
      integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style"
      href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css"
      integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/${hljs_style}.min.css" crossorigin>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"
        integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>

<!-- Extra style sheets (can't be set in mkdocs.yml due to content hash) -->
<link
        rel="stylesheet"
        href="../../assets/stylesheets/main.css"
/>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setting-up-anovos-on-azure-kubernetes-aks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<a href="https://join.slack.com/t/featureengineers/shared_invite/zt-17pkc3f5d-33SUtV8Wx48CpiIRNuQ7JA" style="color: white;">
      <span class="twemoji fa-slack">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </span>
    Join us in the <strong>#anovos</strong> channel on the <em>Feature Engineers Community Slack!</em>
</a>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Anovos Documentation" class="md-header__button md-logo" aria-label="Anovos Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Anovos Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              On Azure Kubernetes
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a
  href="https://github.com/anovos/anovos"
  title="Go to repository"
  class="md-source"
  data-md-component="source"
>
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    anovos/anovos
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Anovos Documentation" class="md-nav__button md-logo" aria-label="Anovos Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Anovos Documentation
  </label>
  
    <div class="md-nav__source">
      <a
  href="https://github.com/anovos/anovos"
  title="Go to repository"
  class="md-source"
  data-md-component="source"
>
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    anovos/anovos
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about.html" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started.html" class="md-nav__link">
        Getting Started 🚀
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Using Anovos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Using Anovos" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Using Anovos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Setting up
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Setting up" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Setting up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="locally.html" class="md-nav__link">
        Locally
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="on_aws.html" class="md-nav__link">
        On AWS EMR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="on_azure_databricks.html" class="md-nav__link">
        On Azure Databricks
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          On Azure Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="on_aks.html" class="md-nav__link md-nav__link--active">
        On Azure Kubernetes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#azure-cloud-infrastructure" class="md-nav__link">
    Azure Cloud Infrastructure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-setup-anovos-client-on-vm" class="md-nav__link">
    Step 1: Setup Anovos Client on VM
  </a>
  
    <nav class="md-nav" aria-label="Step 1: Setup Anovos Client on VM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1" class="md-nav__link">
    Part 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2" class="md-nav__link">
    Part 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-build-anovos-spark-container" class="md-nav__link">
    Step 2: Build Anovos Spark Container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-run-anovos" class="md-nav__link">
    Step 3: Run Anovos
  </a>
  
    <nav class="md-nav" aria-label="Step 3: Run Anovos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-spark-submit" class="md-nav__link">
    Using Spark-Submit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-jupyter-notebook" class="md-nav__link">
    Using Jupyter Notebook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification" class="md-nav__link">
    Verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    Dockerfile
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="on_google_colab.html" class="md-nav__link">
        On Google Colab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="spark_cluster.html" class="md-nav__link">
        On a Spark cluster
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow.html" class="md-nav__link">
        Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config_file.html" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Data Reports
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Reports" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Data Reports
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-reports/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-reports/intermediate_report.html" class="md-nav__link">
        Intermediate Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-reports/final_report.html" class="md-nav__link">
        Final Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-reports/html_report.html" class="md-nav__link">
        HTML Report
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_mapper.html" class="md-nav__link">
        Feature Mapper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mlflow.html" class="md-nav__link">
        MLflow Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_store.html" class="md-nav__link">
        Feature Store Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scaling.html" class="md-nav__link">
        Scaling Up
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../limitations.html" class="md-nav__link">
        Limitations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap.html" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/contributing.html" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/communication.html" class="md-nav__link">
        Communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/code-of-conduct.html" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          API Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          API Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/workflow.html" class="md-nav__link">
        <code>workflow</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          data_analyzer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="data_analyzer" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          data_analyzer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/association_eval_varclus.html" class="md-nav__link">
        <code>association_eval_varclus</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/association_evaluator.html" class="md-nav__link">
        <code>association_evaluator</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/geospatial_analyzer.html" class="md-nav__link">
        <code>geospatial_analyzer</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/quality_checker.html" class="md-nav__link">
        <code>quality_checker</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/stats_generator.html" class="md-nav__link">
        <code>stats_generator</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_analyzer/ts_analyzer.html" class="md-nav__link">
        <code>ts_analyzer</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4">
          data_ingest
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="data_ingest" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          data_ingest
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_ingest/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_ingest/data_ingest.html" class="md-nav__link">
        <code>data_ingest</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_ingest/data_sampling.html" class="md-nav__link">
        <code>data_sampling</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_ingest/geo_auto_detection.html" class="md-nav__link">
        <code>geo_auto_detection</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_ingest/ts_auto_detection.html" class="md-nav__link">
        <code>ts_auto_detection</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          data_report
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="data_report" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          data_report
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_report/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_report/basic_report_generation.html" class="md-nav__link">
        <code>basic_report_generation</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_report/report_generation.html" class="md-nav__link">
        <code>report_generation</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_report/report_preprocessing.html" class="md-nav__link">
        <code>report_preprocessing</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" type="checkbox" id="__nav_6_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_6">
          data_transformer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="data_transformer" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          data_transformer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_transformer/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_transformer/datetime.html" class="md-nav__link">
        <code>datetime</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_transformer/geo_utils.html" class="md-nav__link">
        <code>geo_utils</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_transformer/geospatial.html" class="md-nav__link">
        <code>geospatial</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/data_transformer/transformers.html" class="md-nav__link">
        <code>transformers</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_7" type="checkbox" id="__nav_6_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_7">
          drift_stability
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="drift_stability" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_7">
          <span class="md-nav__icon md-icon"></span>
          drift_stability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/drift_stability/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/drift_stability/drift_detector.html" class="md-nav__link">
        <code>drift_detector</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/drift_stability/stability.html" class="md-nav__link">
        <code>stability</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/drift_stability/validations.html" class="md-nav__link">
        <code>validations</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_8" type="checkbox" id="__nav_6_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_8">
          feature_recommender
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="feature_recommender" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_8">
          <span class="md-nav__icon md-icon"></span>
          feature_recommender
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_recommender/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_recommender/featrec_init.html" class="md-nav__link">
        <code>featrec_init</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_recommender/feature_explorer.html" class="md-nav__link">
        <code>feature_explorer</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_recommender/feature_mapper.html" class="md-nav__link">
        <code>feature_mapper</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_9" type="checkbox" id="__nav_6_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_9">
          feature_store
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="feature_store" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_9">
          <span class="md-nav__icon md-icon"></span>
          feature_store
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_store/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_store/feast_exporter.html" class="md-nav__link">
        <code>feast_exporter</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/feature_store/feature_retrieval.html" class="md-nav__link">
        <code>feature_retrieval</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_10" type="checkbox" id="__nav_6_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_10">
          shared
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="shared" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_10">
          <span class="md-nav__icon md-icon"></span>
          shared
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/shared/_index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/shared/spark.html" class="md-nav__link">
        <code>spark</code>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/shared/utils.html" class="md-nav__link">
        <code>utils</code>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../license.html" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#azure-cloud-infrastructure" class="md-nav__link">
    Azure Cloud Infrastructure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-setup-anovos-client-on-vm" class="md-nav__link">
    Step 1: Setup Anovos Client on VM
  </a>
  
    <nav class="md-nav" aria-label="Step 1: Setup Anovos Client on VM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1" class="md-nav__link">
    Part 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2" class="md-nav__link">
    Part 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-build-anovos-spark-container" class="md-nav__link">
    Step 2: Build Anovos Spark Container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-run-anovos" class="md-nav__link">
    Step 3: Run Anovos
  </a>
  
    <nav class="md-nav" aria-label="Step 3: Run Anovos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-spark-submit" class="md-nav__link">
    Using Spark-Submit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-jupyter-notebook" class="md-nav__link">
    Using Jupyter Notebook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification" class="md-nav__link">
    Verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    Dockerfile
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/anovos/anovos-docs/edit/main/docs/using-anovos/setting-up/on_aks.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="setting-up-anovos-on-azure-kubernetes-aks">Setting up Anovos on Azure Kubernetes (AKS)</h1>
<p>In this section we detailed how to run on Anovos on Azure Kubernetes Environment (AKS).</p>
<h2 id="azure-cloud-infrastructure">Azure Cloud Infrastructure</h2>
<p>Firstly we detail  why the cloud architecture plays a cruclai role in AKS setup. Although cloud architectures can vary depending on custom configurations, the following diagram represents the most common structure and flow of data for the Anovos on Azure K8s.
<img alt="Architecture" src="../../assets/aks_images/image1.png" /></p>
<ul>
<li><code>anovos-client</code> is a Azure VM. It serves as the platform from which the Spark jobs are submitted to the K8s cluster.</li>
<li><code>Kubernetes-services</code> can be any K8s setup, in this case it represents Azure AKS.</li>
<li><code>container-registries</code> to store the anovos-spark docker images for K8s.</li>
<li>Azure Storage containers to store the data-sets to be used in Anovos workflow and the resulting data-sets and reports are also stored there.</li>
</ul>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Resource Group requirements<ul>
<li>Dedicated resource group to contain all the resources to be created for the anovos project.</li>
</ul>
</li>
<li>VNET requirements<ul>
<li>Azure VM and AKS to be located within the same VNET. </li>
<li>Subnet to allow public access (not via NAT gateway).</li>
<li>Different subnet for AKS and VM is recommended.<ul>
<li>VM subnet size to be at least /27 CIDR range. </li>
<li>AKS subnet size to be at least /24 CIDR range or bigger.</li>
</ul>
</li>
</ul>
</li>
<li>VM requirements<ul>
<li>Ubuntu 20 recommended</li>
<li>Single VM with at least 8 core CPU, 16 GB RAM and 128 GB disk.</li>
<li>Install necessary pks and software(incl but not limited to anovos, spark, jdk)</li>
<li>Managed Identity of the VM to have permissions to AKS, Container Registry and Blob Storage. <ul>
<li>Ex: Contributor Role with Resource Group scope, for the VM’s managed identify.</li>
</ul>
</li>
</ul>
</li>
<li>AKS requirements<ul>
<li>Dedicated cluster will be preferred but optional.</li>
<li>Dedicated namespace, service principals for Anovos, recommended.</li>
<li>Sufficient permissions to allow AKS to pull images from ACR.</li>
</ul>
</li>
<li>Azure Storage Container<ul>
<li>Dedicated container for Anovos to store all input dataset, results and reports.<ul>
<li>At this point, the code accepts only single container as it is capable of accepting only one SAS token.</li>
</ul>
</li>
<li>An SAS token with sufficient validity and full permissions on the anovos containers. This will be used within the python code and spark configuration.</li>
</ul>
</li>
<li>Azure Container Registry<ul>
<li>To store anovos-spark docker image, for the executor pods.</li>
</ul>
</li>
</ul>
<h2 id="step-1-setup-anovos-client-on-vm">Step 1: Setup Anovos Client on VM</h2>
<ul>
<li>Software Reqired on VM<ul>
<li>Python 3.9</li>
<li>Spark 3.x</li>
<li>JDK 8</li>
<li>Maven</li>
<li>Jupyter</li>
<li>zure CLI and AZCOPY</li>
<li>Kubectl</li>
<li>Azure CLI and AZCOPY</li>
<li>Docker</li>
<li>Anovos</li>
</ul>
</li>
</ul>
<h3 id="part-1">Part 1</h3>
<ul>
<li>
<p>Switch to root user
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># Switch to root user
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>$ sudo su -
</code></pre></div></p>
</li>
<li>
<p>Install Azure CLI and Azcopy
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>#Install AZ CLI
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>$ curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>#Download AzCopy
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>$ wget https://aka.ms/downloadazcopy-v10-linux
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>#Expand Archive
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>$ tar -xvf downloadazcopy-v10-linux
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>#(Optional) Remove existing AzCopy version
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>$ rm /usr/bin/azcopy
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>#Move AzCopy to the destination you want to store it
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>$ cp ./azcopy_linux_amd64_*/azcopy /usr/bin/
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>#Ensure azcopy has execute permissions for user, group and others.
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>$ chmod +x /usr/bin/azcopy
</code></pre></div></p>
</li>
<li>
<p>Install Kubectl
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$ apt-get update
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>$ apt-get install -y apt-transport-https ca-certificates curl
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>$ curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>$ echo &quot;deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&quot; | sudo tee /etc/apt/sources.list.d/kubernetes.list
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>$ apt-get update
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>$ apt-get install -y kubectl
</code></pre></div></p>
</li>
<li>
<p>Install JDK 8
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$ apt-get update
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>$ apt-get install openjdk-8-jdk
</code></pre></div></p>
</li>
<li>
<p>Install Maven
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$ apt install maven
</code></pre></div></p>
</li>
<li>
<p>Install Docker Client
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a># Note: Python should be set to 3.8 (default for Ubuntu 20)
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a># Verify python version
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>$ python3 -V
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a># Install docker client
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>$ apt-get install apt-transport-https ca-certificates curl software-properties-common
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>$ add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu  $(lsb_release -cs)  stable&quot;
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>$ apt update
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>$ apt-get install docker-ce
</code></pre></div></p>
</li>
<li>
<p>Install Python 3.9
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a># Install Python3.9
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>$ apt-get update
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>$ apt install software-properties-common
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>$ add-apt-repository ppa:deadsnakes/ppa
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>$ apt-get update
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>$ apt install python3.9
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a># Set python3.9 as default
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>$ update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.8 2
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>$ update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.9 1
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>$ update-alternatives --config python3
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a># [Optional] The following is required to fix the error with apt-pkg
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>$ cd /usr/lib/python3/dist-packages
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>$ cp -p apt_pkg.cpython-34m-i386-linux-gnu.so apt_pkg.so or ln -s apt_pkg.cpython-38-x86_64-linux-gnu.so apt_pkg.so
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>$ apt install python3.9-distutils
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>$ apt install python3-pip
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>$ python3.9 -m pip install --upgrade pip
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>$ apt install python3.9-venv
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>$ pip3 install pyspark==3.2.1
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>$ pip3 install py4j
</code></pre></div></p>
</li>
<li>
<p>Install Jupyter Notebook
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$ pip3 install jupyter
</code></pre></div></p>
</li>
<li>
<p>Install Zip
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># This command is required if you wnat to run `make clean build` to build Anovos
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>$ apt install zip
</code></pre></div></p>
</li>
</ul>
<h3 id="part-2">Part 2</h3>
<p><strong>Entire Part 2 setup to be done as <code>azureuser</code> user.</strong></p>
<ul>
<li>
<p>Install Spark
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$ wget https://archive.apache.org/dist/spark/spark-3.2.1/spark-3.2.1-bin-hadoop3.2.tgz
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>$ tar -xvf spark-3.2.1-bin-hadoop3.2.tgz
</code></pre></div></p>
</li>
<li>
<p>Configure Jupyter
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$ jupyter notebook --generate-config  
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a># add the following line in .jupyter/jupyter_notebook_config.py
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>c.NotebookApp.ip = &#39;*&#39;
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>$ jupyter notebook password
</code></pre></div></p>
</li>
<li>
<p>Clone Anovos Repo
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$ git clone https://github.com/anovos/anovos.git
</code></pre></div></p>
</li>
<li>
<p>Install Anovos
(This step is required everytime when we want to use the updated Anovos code)
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a># install build, required only the first time
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>$ pip3 install build
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a># go to the root folder of Anovos repo and build python wheel file 
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>$ python3 -m build --wheel --outdir dist/ .
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a># uninstall the old version of Anovos
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>$ pip3 uninstall anovos
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a># install the latest Anovos from .whl 
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>$ pip3 install dist/anovos-0.3.0-py3-none-any.whl
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a># The following command is required if you encounter ERROR: Cannot uninstall &#39;PyYAML&#39;
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>$ pip3 install --ignore-installed PyYAML
</code></pre></div></p>
</li>
<li>
<p>Configure env variables for <code>azureuser</code>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># Set SPARK_HOME
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>$ echo -e &quot;export SPARK_HOME=/home/azureuser/spark-3.2.1-bin-hadoop3.2&quot; &gt;&gt; ~/.profile
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a># Set JAVA_HOME
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>$ echo -e &quot;export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64&quot; &gt;&gt; ~/.profile
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a># Set PYSPARK
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>$ echo -e &quot;export PYSPARK_PYTHON=/usr/bin/python3&quot; &gt;&gt; ~/.profile
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>$ echo -e &quot;export PYSPARK_DRIVER_PYTHON=/usr/bin/python3&quot; &gt;&gt; ~/.profile
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a># Set PATH
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>$ echo -e &#39;export PATH=&quot;$SPARK_HOME/bin:$PATH&quot;&#39; &gt;&gt; ~/.profile
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a># Source the new Env Variables
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>$ source ~/.profile
</code></pre></div></p>
</li>
<li>
<p>Configure kubectl (NOTE: <strong>Substitute correct values for variables within <code>&lt;&gt;</code></strong>)
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$ az login --identity 
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>$ az aks get-credentials --resource-group &lt;resource-grp&gt; --name &lt;k8s-name&gt; --subscription &lt;subscription&gt;
</code></pre></div></p>
</li>
<li>
<p>Create Namespace in K8s cluster
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$ kubectl get namespace
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>$ kubectl create namespace anovos
</code></pre></div></p>
</li>
<li>
<p>Create AKS Service Accoun
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$ kubectl get serviceaccount --namespace=anovos
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>$ kubectl create serviceaccount spark --namespace=anovos
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>$ kubectl get clusterrolebinding --namespace=anovos
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>$ kubectl create clusterrolebinding spark-role --clusterrole=edit --serviceaccount=anovos:spark --namespace=anovos
</code></pre></div></p>
</li>
</ul>
<h2 id="step-2-build-anovos-spark-container">Step 2: Build Anovos Spark Container</h2>
<p>We need to custom build a docker image to be used by K8s to run the spark executor pods. </p>
<p><strong>Substitute correct values for variables within <code>&lt;&gt;</code></strong></p>
<ul>
<li>
<p>Authenticate using Azure Managed Identity
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>$ sudo az login --identity
</code></pre></div></p>
</li>
<li>
<p>Login to the Azure Container Registry 
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>$ sudo az acr login --name &lt;registryname&gt;
</code></pre></div></p>
</li>
<li>
<p>Build and Push Docker for Executor Pods
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a># build Python wheel file, can copy .whl file under /home/azureuser/spark-3.2.1-bin-hadoop3.2/python
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>$ python3 -m build --wheel --outdir dist/ .
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>$ cp dist/anovos-0.3.0-py3-none-any.whl /home/azureuser/spark-3.2.1-bin-hadoop3.2/python/anovos-0.3.0-py3-none-any.whl
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>$ cd /home/azureuser/spark-3.2.1-bin-hadoop3.2 
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a># build Dockerfile as image. Replace the Dockerfile path with the correct one if required
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>$ sudo ./bin/docker-image-tool.sh -r &lt;registryname&gt;.azurecr.io -t &lt;tag&gt; -p ../Dockerfile build
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a># push Docker image to registry
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>$ sudo docker push &lt;registryname&gt;.azurecr.io/spark-py:&lt;tag&gt;
</code></pre></div>
<strong>NOTE: Dockerfile is provided at the end of this document.</strong></p>
</li>
</ul>
<h2 id="step-3-run-anovos">Step 3: Run Anovos</h2>
<ul>
<li>Build Anovos
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a># Create log4j.properties under /home/azureuser/spark-3.2.1-bin-hadoop3.2/conf, you can also customise your log4j configuration inside this file
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>$ mv /home/azureuser/spark-3.2.1-bin-hadoop3.2/conf/log4j.properties.template /home/azureuser/spark-3.2.1-bin-hadoop3.2/conf/log4j.properties
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a># Go to Anovos repo
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>$ cd /home/azureuser/anovos
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a># Build Anovos. After building Anovos, you can see a new folder `dist/`.
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>$ make clean build
</code></pre></div></li>
</ul>
<h3 id="using-spark-submit">Using Spark-Submit</h3>
<p>To run Anovos, we can write our own workflow file to call the different modules and submodules of Anovos, as per our need and execute in any spark application by just importing Anovos and using it. 
Alternatively, there is also a ready-made workflow file in the repo that can be modified to call the different modules in a pre-set order based on the config file and this can be used to executed via spark-submit. </p>
<ol>
<li>
<p>Get the latest jars and main.py and config file from the repo
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a># Clone the repo
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>$ sudo git clone https://github.com/anovos/anovos.git
</code></pre></div>
Here is an example of spark-submit script (NOTE: <strong>Substitute correct values for variables within <code>&lt; &gt;</code></strong>)
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>./bin/spark-submit \
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>--master k8s://https://&lt;K8s-master-dns&gt;:443 \
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>--deploy-mode client \
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>--name anovos-job-01 \
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>--class org.apache.spark.examples.SparkPi \
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>--conf spark.executor.instances=10 \
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>--conf spark.executor.cores=4 \
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>--conf spark.executor.memory=16g \
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>--conf spark.kubernetes.namespace=anovos \
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>--conf spark.kubernetes.authenticate.driver.serviceAccountName=spark \
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>--conf spark.kubernetes.container.image=&lt;registryname&gt;.azurecr.io/spark-py:&lt;tag&gt; \
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>--conf spark.hadoop.fs.azure.sas.&lt;container&gt;.&lt;storageaccount&gt;.blob.core.windows.net=&quot;&lt;sas_token&gt;&quot; \
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>--packages org.apache.hadoop:hadoop-azure:3.2.0,com.microsoft.azure:azure-storage:8.6.3,org.apache.spark:spark-avro_2.12:3.2.1 \
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>--conf spark.driver.extraJavaOptions=&quot;-Divy.cache.dir=/tmp -Divy.home=/tmp&quot; \
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>--conf spark.executor.extraJavaOptions=&quot;-Dlog4j.configuration=file://$SPARK_HOME/conf/log4j.properties&quot; \
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>--conf spark.driver.extraJavaOptions=&quot;-Dlog4j.configuration=file://$SPARK_HOME/conf/log4j.properties&quot;  \
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>--conf spark.kubernetes.file.upload.path=wasbs://&lt;container&gt;@&lt;storageaccount&gt;.blob.core.windows.net \
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>--jars /home/azureuser/anovos/jars/${histogrammar_jar},/home/azureuser/anovos/jars/${histogrammar_sql_jar} \    ❶
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>/home/azureuser/anovos/dist/main.py \    ❷
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>/home/azureuser/anovos/config/configs.yaml \    ❸    
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>ak8s \     ❹
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>&#39;{&quot;fs.azure.sas.&lt;container&gt;.&lt;storageaccount&gt;.blob.core.windows.net&quot;:&quot;&lt;sas_token&gt;&quot;}&#39;     ❺
</code></pre></div>
    ❶ Anovos uses few external third party packages for some of its sub modules and we specify its jars using the <code>--jars</code> tag. This is found from <code>anovos/jars/*.jar</code> in the repo.     </p>
<p>❷ you can use the main.py file from either <code>anovos/src/main/main.py</code> or <code>anovos/dist/main.py</code>.</p>
<p>❸ you can find sample configs.yaml file from <code>anovos/config/configs.yaml</code>
    - Edit configs.yaml to enter correct values for  Azure storage @ wasbs://…
    <img alt="config.yaml" src="../../assets/aks_images/image2.png" /></p>
<p>❹ There is a keyword passed as argument to the main.py along with config file specifying the run-type for Anovos. Current options are
   - local - for local run
   - emr – for AWS EMR based run
   - databricks – for runs using a DBFS file system
   - ak8s – for runs on Azure K8s setup reading and writing data to Azure Blob Storage.</p>
<p>❺ This is an argument specific to Azure K8s run. Specify the container, storage account name and the sas token with permission to read input/write output in the mentioned paths in the configs.yaml file. For other run_types can set this value as "NA".</p>
</li>
<li>
<p>The final report should be generated at two places</p>
<ul>
<li>local path where spark-submit is being executed from, as "ml_anovos_report.html" which can be opened in Google Chrome browser </li>
<li>in the final_report path specified in the configs.yaml file.</li>
</ul>
</li>
</ol>
<p>More in depth documentation in each of the modules and api docs can be found at <a href="https://docs.anovos.ai">https://docs.anovos.ai</a></p>
<h2 id="using-jupyter-notebook">Using Jupyter Notebook</h2>
<p>Running Anovos on Jupyter notebook is straightforward as using any python package.   
Kindly refer to the https://github.com/anovos/anovos/tree/main/examples/notebook in repo for sample notebooks for each module or the startup-guide for anovos to do a quick run on Jupyter.</p>
<ul>
<li>Open Jupyter Notebook
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>$ jupyter notebook
</code></pre></div>
We can now access the Jupyter Notebook Web UI by http://<ip-address>:8888</li>
</ul>
<p>Here is an example of how to set SparkConf in Notebook
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a># set run type variable
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>run_type = &quot;ak8s&quot; # &quot;local&quot;, &quot;emr&quot;, &quot;databricks&quot;, &quot;ak8s&quot;
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>#For run_type Azure Kubernetes, run the following block 
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>import os
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>from pyspark import SparkContext, SparkConf
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>from pyspark.sql import SparkSession
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>if run_type == &quot;ak8s&quot;:
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>    fs_path = &quot;spark.hadoop.fs.azure.sas.&lt;container&gt;.&lt;storageaccount&gt;.blob.core.windows.net&quot;
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>    auth_key=&quot;&lt;sas_token&gt;&quot;
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>    master_url=&quot;k8s://https://&lt;K8s-master-dns&gt;:443&quot;
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>    docker_image=&quot;&lt;registryname&gt;.azurecr.io/spark-py:&lt;tag&gt;&quot;
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>    kubernetes_namespace =&quot;anovos&quot;
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>    # Create Spark config for our Kubernetes based cluster manager
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>    sparkConf = SparkConf()
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>    sparkConf.setMaster(master_url)
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>    sparkConf.setAppName(&quot;Anovos_pipeline&quot;)
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>    sparkConf.set(&quot;spark.submit.deployMode&quot;,&quot;client&quot;)
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>    sparkConf.set(&quot;spark.kubernetes.container.image&quot;, docker_image)
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>    sparkConf.set(&quot;spark.kubernetes.namespace&quot;, kubernetes_namespace)
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>    sparkConf.set(&quot;spark.executor.instances&quot;, &quot;4&quot;)
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>    sparkConf.set(&quot;spark.executor.cores&quot;, &quot;4&quot;)
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>    sparkConf.set(&quot;spark.executor.memory&quot;, &quot;16g&quot;)
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>    sparkConf.set(&quot;spark.kubernetes.pyspark.pythonVersion&quot;, &quot;3&quot;)
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>    sparkConf.set(&quot;spark.kubernetes.authenticate.driver.serviceAccountName&quot;, &quot;spark&quot;)
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>    sparkConf.set(fs_path,auth_key)
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>    sparkConf.set(&quot;spark.kubernetes.authenticate.serviceAccountName&quot;, &quot;spark&quot;)
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>    sparkConf.set(&quot;spark.jars.packages&quot;, &quot;org.apache.hadoop:hadoop-azure:3.2.0,com.microsoft.azure:azure-storage:8.6.3,io.github.histogrammar:histogrammar_2.12:1.0.20,io.github.histogrammar:histogrammar-sparksql_2.12:1.0.20,org.apache.spark:spark-avro_2.12:3.2.1&quot;)
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>    # Initialize our Spark cluster, this will actually
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a>    # generate the worker nodes.
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>    spark = SparkSession.builder.config(conf=sparkConf).getOrCreate()
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a>    sc = spark.sparkContext
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a>#For other run types import from anovos.shared.
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a>else:
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a>    from anovos.shared.spark import *
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a>    auth_key = &quot;NA&quot;
</code></pre></div>
<strong>Please note that you can only use the files in Azure Blob Storage (<code>wasbs://&lt;container&gt;@&lt;storageaccount&gt;.blob.core.windows.net/</code>). If you use local file, it will throw error.</strong></p>
<h2 id="verification">Verification</h2>
<p><strong>This is applicable for both by spark-submit or using Jupyter notebooks</strong> </p>
<p>There are a few steps that can be executed to confirm the run is happening in distirbuted manner using Kubernetes services.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>kubectl get pods -n anovos
</code></pre></div>
or 
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>kubectl get all
</code></pre></div></p>
<p>The above commands can be used to view the current running pods for the namespace. </p>
<p><img alt="running_pods_screenshot" src="../../assets/aks_images/image3.png" /></p>
<h2 id="dockerfile">Dockerfile</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>ARG base_img
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>FROM $base_img
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>WORKDIR /
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a># Reset to root to run installation tasks
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>USER 0
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>RUN mkdir ${SPARK_HOME}/python
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>COPY python/anovos-0.3.0-py3-none-any.whl ${SPARK_HOME}/python/anovos-0.3.0-py3-none-any.whl
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>RUN apt-get update &amp;&amp; \
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>    apt install -y wget python3 python3-pip &amp;&amp; \
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>    pip3 install --upgrade pip setuptools &amp;&amp; \
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>    pip3 install ${SPARK_HOME}/python/anovos-0.3.0-py3-none-any.whl &amp;&amp; \
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>    rm -r /root/.cache &amp;&amp; rm -rf /var/cache/apt/*
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>COPY python/pyspark ${SPARK_HOME}/python/pyspark
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>COPY python/lib ${SPARK_HOME}/python/lib
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>WORKDIR /opt/spark/work-dir
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a># Download hadoop-azure, azure-storage, and dependencies (See above)
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/apache/hadoop/hadoop-azure/3.2.0/hadoop-azure-3.2.0.jar -O /opt/spark/jars/hadoop-azure-3.2.0.jar
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>RUN wget --quiet https://repo1.maven.org/maven2/com/microsoft/azure/azure-storage/8.6.3/azure-storage-8.6.3.jar -O /opt/spark/jars/azure-storage-8.6.3.jar
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/apache/httpcomponents/httpclient/4.5.2/httpclient-4.5.2.jar -O /opt/spark/jars/httpclient-4.5.2.jar
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-util-ajax/9.3.24.v20180605/jetty-util-ajax-9.3.24.v20180605.jar -O /opt/spark/jars/jetty-util-ajax-9.3.24.v20180605.jar
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/codehaus/jackson/jackson-mapper-asl/1.9.13/jackson-mapper-asl-1.9.13.jar -O /opt/spark/jars/jackson-mapper-asl-1.9.13.jar
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/codehaus/jackson/jackson-core-asl/1.9.13/jackson-core-asl-1.9.13.jar -O /opt/spark/jars/jackson-core-asl-1.9.13.jar
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/wildfly/openssl/wildfly-openssl/1.0.4.Final/wildfly-openssl-1.0.4.Final.jar -O /opt/spark/jars/wildfly-openssl-1.0.4.Final.jar
<a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/apache/httpcomponents/httpcore/4.4.4/httpcore-4.4.4.jar -O /opt/spark/jars/httpcore-4.4.4.jar
<a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a>RUN wget --quiet https://repo1.maven.org/maven2/commons-logging/commons-logging/1.1.3/commons-logging-1.1.3.jar -O /opt/spark/jars/commons-logging-1.1.3.jar
<a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a>RUN wget --quiet https://repo1.maven.org/maven2/commons-codec/commons-codec/1.11/commons-codec-1.11.jar -O /opt/spark/jars/commons-codec-1.11.jar
<a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-util/9.3.24.v20180605/jetty-util-9.3.24.v20180605.jar -O /opt/spark/jars/jetty-util-9.3.24.v20180605.jar
<a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a>RUN wget --quiet https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.9.4/jackson-core-2.9.4.jar -O /opt/spark/jars/jackson-core-2.9.4.jar
<a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/slf4j/slf4j-api/1.7.12/slf4j-api-1.7.12.jar -O /opt/spark/jars/slf4j-api-1.7.12.jar
<a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>RUN wget --quiet https://repo1.maven.org/maven2/org/apache/commons/commons-lang3/3.4/commons-lang3-3.4.jar -O /opt/spark/jars/commons-lang3-3.4.jar
<a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a>RUN wget --quiet https://repo1.maven.org/maven2/com/microsoft/azure/azure-keyvault-core/1.0.0/azure-keyvault-core-1.0.0.jar -O /opt/spark/jars/azure-keyvault-core-1.0.0.jar
<a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a>RUN wget --quiet https://repo1.maven.org/maven2/com/google/guava/guava/20.0/guava-20.0.jar -O /opt/spark/jars/guava-20.0.jar
<a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a>
<a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>ENTRYPOINT [ &quot;/opt/entrypoint.sh&quot; ]
</code></pre></div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="on_azure_databricks.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: On Azure Databricks" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              On Azure Databricks
            </div>
          </div>
        </a>
      
      
        
        <a href="on_google_colab.html" class="md-footer__link md-footer__link--next" aria-label="Next: On Google Colab" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              On Google Colab
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/anovos" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://join.slack.com/t/featureengineers/shared_invite/zt-17pkc3f5d-33SUtV8Wx48CpiIRNuQ7JA" target="_blank" rel="noopener" title="join.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/anovos" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
  </body>
</html>